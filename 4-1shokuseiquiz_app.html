<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¤ç”Ÿã¨é·ç§» ãƒ©ãƒ³ãƒ€ãƒ ç¢ºèªã‚¯ã‚¤ã‚º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        .container {
            max-width: 800px;
        }
        .quiz-card {
            border-left: 5px solid #06B6D4; /* Cyan 600 */
        }
        .option-button {
            transition: all 0.2s;
        }
        .correct {
            background-color: #10B981 !important; /* Emerald 500 */
            color: white !important;
        }
        .incorrect {
            background-color: #EF4444 !important; /* Red 500 */
            color: white !important;
        }
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®éè¡¨ç¤ºï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ï¼‰ */
        body::-webkit-scrollbar {
            display: none;
        }
        body {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="container mx-auto">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸŒ± æ¤ç”Ÿã¨é·ç§» ãƒ©ãƒ³ãƒ€ãƒ ç¢ºèªã‚¯ã‚¤ã‚º</h1>
            <p class="text-gray-600">çŸ¥è­˜å®šç€åº¦ã¨æ¦‚å¿µç†è§£åº¦ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã—ã‚‡ã†ã€‚</p>
            <button onclick="startQuiz()" class="mt-4 px-6 py-2 bg-cyan-600 text-white font-semibold rounded-lg shadow-md hover:bg-cyan-700 transition duration-150">
                ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹ / ãƒªã‚»ãƒƒãƒˆ
            </button>
        </header>

        <main id="quiz-area">
            <!-- å•é¡Œã¨çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ -->
        </main>
        
    </div>

    <script>
        // å•é¡Œãƒ‡ãƒ¼ã‚¿
        const questionsData = [
            {
                id: 1,
                prompt: "æ¤ç”ŸãŒæ™‚é–“ã¨ã¨ã‚‚ã«ç§»ã‚Šå¤‰ã‚ã‚Šã€ä¸€å®šã®æ–¹å‘æ€§ã‚’ã‚‚ã£ã¦å¤‰åŒ–ã—ã¦ã„ãç¾è±¡ã€ãŠã‚ˆã³ãã®å¤‰åŒ–ãŒæœ€çµ‚çš„ã«åˆ°é”ã™ã‚‹å®‰å®šã—ãŸçŠ¶æ…‹ã‚’ç¤ºã™ç”¨èªã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚",
                options: [
                    { text: "ç§»ã‚Šå¤‰ã‚ã‚‹ç¾è±¡ï¼šé·ç§»ï¼ˆæ¤ç”Ÿé·ç§»ï¼‰ã€æœ€çµ‚çš„ã«åˆ°é”ã™ã‚‹çŠ¶æ…‹ï¼šæ¥µç›¸ï¼ˆã‚¯ãƒ©ã‚¤ãƒãƒƒã‚¯ã‚¹ï¼‰", isCorrect: true, detail: "æ¤ç”ŸãŒä¸€å®šã®æ–¹å‘æ€§ã‚’ã‚‚ã£ã¦å¤‰åŒ–ã™ã‚‹ç¾è±¡ãŒã€Œé·ç§»ã€ã§ã‚ã‚Šã€ãã®å®‰å®šã—ãŸæœ€çµ‚çŠ¶æ…‹ã‚’ã€Œæ¥µç›¸ã€ã¨ã„ã„ã¾ã™ã€‚" },
                    { text: "ç§»ã‚Šå¤‰ã‚ã‚‹ç¾è±¡ï¼šç¨®å¤šæ§˜æ€§ã€æœ€çµ‚çš„ã«åˆ°é”ã™ã‚‹çŠ¶æ…‹ï¼šæ¥µç›¸æ—", isCorrect: false, detail: "ã€Œç¨®å¤šæ§˜æ€§ã€ã¯ç¨®ã®è±Šå¯Œã•ã‚’ç¤ºã™æŒ‡æ¨™ã§ã€ç¾è±¡è‡ªä½“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" },
                    { text: "ç§»ã‚Šå¤‰ã‚ã‚‹ç¾è±¡ï¼šé·ç§»ï¼ˆæ¤ç”Ÿé·ç§»ï¼‰ã€æœ€çµ‚çš„ã«åˆ°é”ã™ã‚‹çŠ¶æ…‹ï¼šã‚®ãƒ£ãƒƒãƒ—", isCorrect: false, detail: "ã€Œã‚®ãƒ£ãƒƒãƒ—ã€ã¯æ—å† ã®ç©´ã®ã“ã¨ã§ã€æœ€çµ‚çš„ãªå®‰å®šçŠ¶æ…‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" },
                    { text: "ç§»ã‚Šå¤‰ã‚ã‚‹ç¾è±¡ï¼šç’°å¢ƒå½¢æˆä½œç”¨ã€æœ€çµ‚çš„ã«åˆ°é”ã™ã‚‹çŠ¶æ…‹ï¼šä¸€æ¬¡é·ç§»", isCorrect: false, detail: "ã€Œç’°å¢ƒå½¢æˆä½œç”¨ã€ã¯ç”Ÿç‰©ãŒç’°å¢ƒã‚’å¤‰ãˆã‚‹ä½œç”¨ã§ã‚ã‚Šã€ç¾è±¡å…¨ä½“ã‚’ç¤ºã™ç”¨èªã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" }
                ],
                multiSelect: false // å®Ÿéš›ã¯1ã¤ã®ã¿æ­£è§£ã ãŒã€å½¢å¼ä¸Šã¯è¤‡æ•°é¸æŠã¨ã—ã¦æ‰±ã†ãŸã‚ã€å¾Œç¶šã®å‡¦ç†ã§å¯¾å¿œ
            },
            {
                id: 2,
                prompt: "ç«å±±æ´»å‹•ãªã©ã§ã§ããŸè£¸åœ°ã‹ã‚‰å§‹ã¾ã‚‹é·ç§»ï¼ˆä¸€æ¬¡é·ç§»ï¼‰ã¨ã€å±±ç«äº‹è·¡ã‚„ä¼æ¡è·¡åœ°ã‹ã‚‰å§‹ã¾ã‚‹é·ç§»ï¼ˆäºŒæ¬¡é·ç§»ï¼‰ã®é€²è¡Œé€Ÿåº¦ã«é–¢ã™ã‚‹èª¬æ˜ã¨ã—ã¦ã€æ­£ã—ã„ã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚ï¼ˆè¤‡æ•°é¸æŠï¼‰",
                options: [
                    { text: "äºŒæ¬¡é·ç§»ã¯ã€åœŸå£Œã‚„ç¨®å­ã€åœŸå£Œå‹•ç‰©ãªã©ã‚’å¼•ãç¶™ã„ã å½¢ã§å§‹ã¾ã‚‹ãŸã‚ã€ä¸€æ¬¡é·ç§»ã«æ¯”ã¹ã¦é€Ÿãé€²è¡Œã™ã‚‹ã€‚", isCorrect: true, detail: "äºŒæ¬¡é·ç§»ã¯åœŸå£ŒãŒæ®‹ã£ã¦ã„ã‚‹ãŸã‚ã€åœŸå£Œå½¢æˆã®æ™‚é–“ã‚’å¿…è¦ã¨ã›ãšé€Ÿã„ã§ã™ã€‚" },
                    { text: "ä¸€æ¬¡é·ç§»ã§ã¯ã€åˆæœŸæ®µéšã§å²©çŸ³ã®é¢¨åŒ–ãŒé€²ã¿ã€åœŸå£ŒãŒå½¢æˆã•ã‚Œã‚‹ã®ã«ã‹ãªã‚Šã®å¹´æœˆã‚’è¦ã™ã‚‹ãŸã‚ã€äºŒæ¬¡é·ç§»ã‚ˆã‚Šé€²è¡ŒãŒé…ã„ã€‚", isCorrect: true, detail: "ä¸€æ¬¡é·ç§»ã¯ã€åœŸå£Œå½¢æˆã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚é€²è¡ŒãŒé…ã„ã§ã™ã€‚" },
                    { text: "é·ç§»ã®é€Ÿåº¦ã¯ã€åœŸå£Œã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãšã€æœ€çµ‚çš„ã«åˆ°é”ã™ã‚‹æ¥µç›¸æ¨¹ç¨®ã®ç¨®é¡ã«ã‚ˆã£ã¦æ±ºå®šã•ã‚Œã‚‹ã€‚", isCorrect: false, detail: "é€Ÿåº¦ã¯åˆæœŸæ¡ä»¶ï¼ˆåœŸå£Œã®æœ‰ç„¡ï¼‰ã«å¤§ããå½±éŸ¿ã•ã‚Œã¾ã™ã€‚" },
                    { text: "äºŒæ¬¡é·ç§»ã§ã¯ã€è£¸åœ°ã®å½¢æˆã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚ã€é€²è¡Œã®åˆæœŸã«å…ˆé§†æ¤ç‰©ï¼ˆãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢æ¤ç‰©ï¼‰ã®ä¾µå…¥ã‚’å¾…ã¤å¿…è¦ãŒãªã„ã€‚", isCorrect: false, detail: "è£¸åœ°ã®å½¢æˆã‹ã‚‰å§‹ã¾ã‚‹ã®ã¯ä¸€æ¬¡é·ç§»ã§ã™ã€‚" }
                ],
                multiSelect: true
            },
            {
                id: 3,
                prompt: "æ¤ç”Ÿã®é·ç§»ã®åˆæœŸæ®µéšã«è£¸åœ°ã«æœ€åˆã«ä¾µå…¥ã™ã‚‹æ¤ç‰©ï¼ˆå…ˆé§†æ¤ç‰©/ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢æ¤ç‰©ï¼‰ãŒæŒã¤ç‰¹å¾´ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚ï¼ˆè¤‡æ•°é¸æŠï¼‰",
                options: [
                    { text: "è‰æœ¬æ¤ç‰©ãŒå¤šã„ã€‚", isCorrect: true, detail: "ä¸€æ¬¡é·ç§»ã®åˆæœŸæ®µéšã§ã¯ã€ç”Ÿè‚²ãŒé€Ÿã„è‰æœ¬æ¤ç‰©ãŒå„ªå ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚" },
                    { text: "èŠ½ã°ãˆã‚„å¹¼æœ¨ãŒå¼±ã„å…‰ã®ã‚‚ã¨ã§ã‚‚ç”Ÿè‚²ã§ãã‚‹ï¼ˆè€é™°æ€§ãŒé«˜ã„ï¼‰ã€‚", isCorrect: false, detail: "ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢æ¤ç‰©ã¯å¼·ã„å…‰ãŒå¿…è¦ãªé™½ç”Ÿæ¤ç‰©ã§ã™ã€‚è€é™°æ€§ãŒé«˜ã„ã®ã¯é™°æ¨¹ã§ã™ã€‚" },
                    { text: "åœŸå£Œã®å½¢æˆã‚’ä¿ƒã—ã€è’åŸã‹ã‚‰è‰åŸã¸ã®ç§»è¡Œã«ä¸å¯æ¬ ã§ã‚ã‚‹ã€‚", isCorrect: true, detail: "ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢æ¤ç‰©ã®éºéª¸ã‚„æ ¹ãŒè…æ¤ã‚’å¢—ã‚„ã—ã€åœŸå£Œå½¢æˆã‚’åŠ©ã‘ã¾ã™ã€‚" },
                    { text: "å¼·ã„å…‰ã®ã‚‚ã¨ã§ã®æˆé•·ãŒé€Ÿã„ã€‚", isCorrect: true, detail: "å¼·ã„å…‰ãŒå½“ãŸã‚‹è£¸åœ°ã§ç«¶äº‰åŠ›ã‚’ç™ºæ®ã™ã‚‹ãŸã‚ã€æˆé•·ãŒé€Ÿã„ã§ã™ã€‚" }
                ],
                multiSelect: true
            },
            {
                id: 4,
                prompt: "æ¤ç”Ÿã®é·ç§»ãŒé€²è¡Œã™ã‚‹ã«ã¤ã‚Œã¦ã€æ¤ç”Ÿå†…ï¼ˆæ—å†…ï¼‰ã®ç’°å¢ƒã§èµ·ã“ã‚‹å¤‰åŒ–ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚ï¼ˆè¤‡æ•°é¸æŠï¼‰",
                options: [
                    { text: "åœŸå£Œã®è…æ¤è³ªï¼ˆæœ‰æ©Ÿç‰©ï¼‰ãŒå¢—åŠ ã™ã‚‹ã€‚", isCorrect: true, detail: "æ¤ç‰©ã®éºéª¸ãŒåˆ†è§£ã•ã‚Œã€åœŸå£ŒãŒè‚¥æ²ƒã«ãªã‚Šã¾ã™ã€‚" },
                    { text: "æ£®æ—ã®ç™ºé”ã«ä¼´ã„ã€æ—å†…ã«å±Šãåœ°è¡¨ã®å…‰ã®å¼·ã•ãŒå¼±ããªã‚‹ã€‚", isCorrect: true, detail: "æ—å† ãŒå¯†ã«ãªã‚‹ã“ã¨ã§ã€æ—åºŠã®å…‰é‡ã¯æ¸›å°‘ã—ã¾ã™ã€‚" },
                    { text: "åœ°è¡¨é¢ã®æ¸©åº¦å¤‰åŒ–ãŒæ¿€ã—ããªã‚‹ã€‚", isCorrect: false, detail: "æ¤ç”ŸãŒåœ°è¡¨ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã€æ¸©åº¦å¤‰åŒ–ã¯ç·©ã‚„ã‹ã«ãªã‚Šã¾ã™ã€‚" },
                    { text: "æ¤ç”ŸãŒå¯†ã«ãªã‚‹ã“ã¨ã§åœ°è¡¨ãŒæ¹¿æ½¤ã«ãªã‚‹ã€‚", isCorrect: true, detail: "æ¨¹å† ãŒæ—¥å°„ã‚’é®ã‚Šã€åœ°è¡¨ã‹ã‚‰ã®è’¸ç™ºãŒæŠ‘ãˆã‚‰ã‚Œã‚‹ãŸã‚ã§ã™ã€‚" }
                ],
                multiSelect: true
            },
            {
                id: 5,
                prompt: "é·ç§»ã®éç¨‹ã®ã†ã¡ã€è‰åŸã®æ¬¡ã«ç¾ã‚Œã€ã‚„ãŒã¦é™½æ¨¹æ—ã¸ã¨ç§»è¡Œã™ã‚‹æ®µéšã§å„ªå ã™ã‚‹æ¤ç”Ÿã‚’å½¢æˆã™ã‚‹æ¨¹ç¨®ã¨ã—ã¦ã€é©åˆ‡ãªã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚",
                options: [
                    { text: "æ¥µç›¸æ¨¹ç¨®", isCorrect: false, detail: "æ¥µç›¸æ¨¹ç¨®ã¯é™°æ¨¹ãŒä¸­å¿ƒã§ã‚ã‚Šã€é™½æ¨¹æ—ã¯ã¾ã æ¥µç›¸ã«é”ã—ã¦ã„ã¾ã›ã‚“ã€‚" },
                    { text: "é™½æ¨¹", isCorrect: true, detail: "è‰åŸã®æ¬¡ã«ã€å…‰ã‚’å¤šãå¿…è¦ã¨ã™ã‚‹é™½æ¨¹ãŒå„ªå ã™ã‚‹é™½æ¨¹æ—ã¸ã¨ç§»è¡Œã—ã¾ã™ã€‚" },
                    { text: "ä½æœ¨", isCorrect: false, detail: "ä½æœ¨ã¯é™½æ¨¹æ—ã®å‰ã®æ®µéšã§å„ªå ã—ã¾ã™ã€‚é™½æ¨¹æ—ã‚’å½¢æˆã™ã‚‹ã®ã¯é™½æ¨¹ã§ã™ã€‚" },
                    { text: "é™°æ¨¹", isCorrect: false, detail: "é™°æ¨¹ã¯é™½æ¨¹æ—ã®æ—åºŠã§æˆé•·ã—ã€æ¥µç›¸æ—ã‚’å½¢æˆã—ã¾ã™ã€‚" }
                ],
                multiSelect: false
            },
            {
                id: 6,
                prompt: "æ¤ç”Ÿã®é·ç§»ã«ãŠã„ã¦ã€é™½æ¨¹æ—ã®æ—åºŠï¼ˆåœ°è¡¨ï¼‰ã§é™°æ¨¹ã®å¹¼æœ¨ãŒç”Ÿè‚²ã§ãã‚‹ä¸»ãªç†ç”±ã«é–¢ã™ã‚‹è¨˜è¿°ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚",
                options: [
                    { text: "é™°æ¨¹ã¯ã€èŠ½ã°ãˆã‚„å¹¼æœ¨ãŒå¼±ã„å…‰ã®ã‚‚ã¨ã§ã‚‚ç”Ÿè‚²ã§ãã‚‹ï¼ˆè€é™°æ€§ãŒé«˜ã„ï¼‰ã¨ã„ã†ç‰¹æ€§ã‚’æŒã¤ãŸã‚ã§ã‚ã‚‹ã€‚", isCorrect: true, detail: "é™°æ¨¹ã®æœ€å¤§ã®ç‰¹å¾´ã§ã‚ã‚Šã€é™½æ¨¹æ—ã®æš—ã„æ—åºŠã§ç”Ÿãæ®‹ã‚Œã‚‹ç†ç”±ã§ã™ã€‚" },
                    { text: "é™½æ¨¹æ—ã®æ¨¹å† ãŒå…‰ã‚’é®ã‚‹ã“ã¨ã§ã€é™½æ¨¹ã®å¹¼æœ¨ã¯æˆé•·ã§ããšã€çµæœã¨ã—ã¦é™°æ¨¹ãŒç«¶äº‰ã«å‹åˆ©ã™ã‚‹ã€‚", isCorrect: false, detail: "é™°æ¨¹ã®ç‰¹æ€§ï¼ˆè€é™°æ€§ï¼‰ãŒä¸»ãªç†ç”±ã§ã‚ã‚Šã€é™½æ¨¹ã®å¹¼æœ¨ã¨ã®ç«¶äº‰ã«å‹ã¤ãŸã‚ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" },
                    { text: "é™°æ¨¹ã®å¹¼æœ¨ã¯ã€é™½æ¨¹ã®å¹¼æœ¨ã‚ˆã‚Šã‚‚èƒŒãŒé«˜ãã€å…‰ã‚’ç¢ºä¿ã—ã‚„ã™ã„ã€‚", isCorrect: false, detail: "å¹¼æœ¨ã®æ®µéšã§ç‰¹ã«èƒŒãŒé«˜ã„ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚" },
                    { text: "é™½æ¨¹ãŒå…‰åˆæˆã‚’ã—ãªã„å¤œé–“ã«ã€é™°æ¨¹ãŒå„ªå…ˆçš„ã«å…‰ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ã€‚", isCorrect: false, detail: "å…‰åˆæˆã¯å…‰ãŒã‚ã‚‹ã¨ãã«è¡Œã‚ã‚Œã¾ã™ã€‚" }
                ],
                multiSelect: false
            },
            {
                id: 7,
                prompt: "æ¤ç”Ÿã®é·ç§»ã®æœ€çµ‚æ®µéšã§ã‚ã‚‹æ¥µç›¸æ—ï¼ˆã‚¯ãƒ©ã‚¤ãƒãƒƒã‚¯ã‚¹ï¼‰ã®ç‰¹å¾´ãŠã‚ˆã³ã€ãã®å¾Œã®å¤‰åŒ–ã«é–¢ã™ã‚‹èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã‚’å…¨ã¦é¸ã³ãªã•ã„ã€‚ï¼ˆè¤‡æ•°é¸æŠï¼‰",
                options: [
                    { text: "æ¥µç›¸æ—ã§ã¯ã€é™°æ¨¹ãŒæˆé•·ã—ã€é™°æ¨¹ã®å¹¼æœ¨ãŒè¦ªæœ¨ã¨å…¥ã‚Œæ›¿ã‚ã‚‹ãŸã‚ã€æ§‹æˆã™ã‚‹ç¨®ã«å¤§ããªå¤‰åŒ–ãŒè¦‹ã‚‰ã‚Œãªããªã‚‹ã€‚", isCorrect: true, detail: "è€é™°æ€§ã®é«˜ã„é™°æ¨¹ã«ã‚ˆã‚‹è‡ªå·±å†ç”Ÿç”£ã«ã‚ˆã‚Šã€æ¤ç”ŸãŒå®‰å®šã—ã¾ã™ã€‚" },
                    { text: "æ¥µç›¸æ—ã¯ã€æ¤ç”ŸãŒæ™‚é–“ã¨ã¨ã‚‚ã«ç§»ã‚Šå¤‰ã‚ã‚Šã€ã“ã‚Œä»¥ä¸Šå¤§ããªå¤‰åŒ–ãŒè¦‹ã‚‰ã‚Œãªã„å®‰å®šã—ãŸçŠ¶æ…‹ã§ã‚ã‚‹ã€‚", isCorrect: true, detail: "æ¥µç›¸ã¯ã€ç’°å¢ƒã®å¤§ããªå¤‰åŒ–ãŒãªã„é™ã‚Šã€å®‰å®šã—ãŸçŠ¶æ…‹ã¨å®šç¾©ã•ã‚Œã¾ã™ã€‚" },
                    { text: "é·ç§»ãŒæ¥µç›¸ã«åˆ°é”ã™ã‚‹ã¨ã€æ£®æ—ã‚’æ§‹æˆã™ã‚‹æ¤ç‰©ã®ç¨®é¡ã¯ã€åˆæœŸã®è‰åŸæ®µéšã‚ˆã‚Šã‚‚å¿…ãšå¢—åŠ ã™ã‚‹ã€‚", isCorrect: false, detail: "ç¨®ã®å¤šæ§˜æ€§ã¯ã€é™½æ¨¹ã¨é™°æ¨¹ãŒæ··ã–ã‚‹æ··äº¤æ—ã®æ®µéšã§æœ€ã‚‚é«˜ããªã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚" },
                    { text: "å°é¢¨ã«ã‚ˆã‚‹å€’æœ¨ãªã©ã§æ—å† ã«ã‚®ãƒ£ãƒƒãƒ—ãŒç”Ÿã˜ãŸå ´åˆã€æ—åºŠã¾ã§å…‰ãŒå±Šãã‚ˆã†ã«ãªã‚Šã€æ¥µç›¸æ—ã®æ§‹æˆç¨®ãŒå¤‰åŒ–ã™ã‚‹å ´åˆãŒã‚ã‚‹ã€‚", isCorrect: true, detail: "æ”ªä¹±ã«ã‚ˆã‚‹ã‚®ãƒ£ãƒƒãƒ—ã¯ã€æ¥µç›¸æ—ã®éƒ¨åˆ†çš„ãªæ›´æ–°ã‚„å¤‰åŒ–ã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚" }
                ],
                multiSelect: true
            },
            {
                id: 8,
                prompt: "ã‚ã‚‹ç”Ÿæ…‹ç³»ã«ãŠã„ã¦ã€ã‚ã‚‹ç”Ÿç‰©ç¨®ãŒé™¤å»ã•ã‚Œã‚‹ã¨ã€ãã®ç”Ÿæ…‹ç³»å…¨ä½“ã®ç¨®å¤šæ§˜æ€§ã«å¤§ããªå½±éŸ¿ã‚’åŠã¼ã™å ´åˆãŒã‚ã‚‹ã€‚ã“ã®ã‚ˆã†ãªç”Ÿç‰©ç¨®ãŒå­˜åœ¨ã™ã‚‹ç†ç”±ã«ã¤ã„ã¦ã®èª¬æ˜ã¨ã—ã¦ã€æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã‚’ä¸€ã¤é¸ã³ãªã•ã„ã€‚",
                options: [
                    { text: "ãã®ç”Ÿç‰©ç¨®ãŒã‚­ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³ç¨®ã¨ã‚ˆã°ã‚Œã€æ•é£Ÿãƒ»è¢«é£Ÿã®é–¢ä¿‚ã‚’é€šã˜ã¦ä»–ã®ç¨®ã®å„ªå ã‚„çµ¶æ»…ã‚’æŠ‘åˆ¶ã—ã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚", isCorrect: true, detail: "ã‚­ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³ç¨®ã¯ã€å€‹ä½“æ•°ã¯å¤šããªãã¦ã‚‚ã€ç”Ÿæ…‹ç³»ã®å¤šæ§˜æ€§ã‚„æ§‹é€ ã‚’ç¶­æŒã™ã‚‹ä¸Šã§æ±ºå®šçš„ãªå½¹å‰²ã‚’æœãŸã™ç¨®ã§ã™ã€‚" },
                    { text: "ãã®ç”Ÿç‰©ç¨®ãŒä¸€æ¬¡æ¶ˆè²»è€…ã§ã‚ã‚Šã€é£Ÿç‰©é€£é–ã«ãŠã‘ã‚‹å€‹ä½“æ•°ãŒæœ€ã‚‚å¤šã„ãŸã‚ã§ã‚ã‚‹ã€‚", isCorrect: false, detail: "å€‹ä½“æ•°ã®å¤šå¯¡ã§ã¯ãªãã€ç”Ÿæ…‹ç³»ã¸ã®å½±éŸ¿åŠ›ãŒé‡è¦ã§ã™ã€‚" },
                    { text: "ãã®ç”Ÿç‰©ç¨®ãŒåˆ†è§£è€…ã¨ã—ã¦ã€æœ‰æ©Ÿç‰©ã®åˆ†è§£é€Ÿåº¦ã‚’æ±ºå®šã¥ã‘ã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚", isCorrect: false, detail: "åˆ†è§£è€…ã‚‚é‡è¦ã§ã™ãŒã€ã“ã®èª¬æ˜ã¯ã€Œã‚­ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³ç¨®ã€ã®æ¦‚å¿µãŒæœ€ã‚‚é©åˆ‡ã§ã™ã€‚" },
                    { text: "ãã®ç”Ÿç‰©ç¨®ã¯ã€çµ¶æ»…ã®å±æ©Ÿã«ç€•ã—ã¦ãŠã‚Šã€ãã®æ¶ˆå¤±ãŒç’°å¢ƒå½¢æˆä½œç”¨ã‚’å¼±ã‚ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚", isCorrect: false, detail: "çµ¶æ»…å±æƒ§ç¨®ã§ã‚ã‚‹ã‹å¦ã‹ã¯æœ¬è³ªçš„ã§ã¯ãªãã€ç”Ÿæ…‹ç³»ã®æ©Ÿèƒ½ç¶­æŒã¸ã®å½±éŸ¿ãŒé‡è¦ã§ã™ã€‚" }
                ],
                multiSelect: false
            }
        ];

        let currentQuestionIndex = 0;
        let shuffledQuestions = [];
        let userAnswers = {}; // { questionId: [selectedOptionIndex, ...], ... }
        const quizArea = document.getElementById('quiz-area');

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°: é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹ (Fisher-Yatesã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ã‚¯ã‚¤ã‚ºé–‹å§‹/ãƒªã‚»ãƒƒãƒˆ
        function startQuiz() {
            // å•é¡Œãƒªã‚¹ãƒˆã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            shuffledQuestions = shuffleArray([...questionsData]);
            currentQuestionIndex = 0;
            userAnswers = {};
            renderQuestion();
        }

        // å•é¡Œã®æç”»
        function renderQuestion() {
            if (currentQuestionIndex >= shuffledQuestions.length) {
                renderResults();
                return;
            }

            const q = shuffledQuestions[currentQuestionIndex];
            const qNumber = currentQuestionIndex + 1;
            
            // é¸æŠè‚¢ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            const shuffledOptions = shuffleArray([...q.options]);

            // é¸æŠè‚¢ã«ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä»˜ä¸ï¼ˆæ­£èª¤åˆ¤å®šæ™‚ã«ä½¿ã†ï¼‰
            const optionsWithIndex = shuffledOptions.map((opt, index) => ({
                ...opt,
                originalIndex: q.options.findIndex(original => original.text === opt.text) // å…ƒã®é…åˆ—ã§ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿æŒ
            }));

            // é¸æŠã‚¿ã‚¤ãƒ—è¡¨ç¤º
            const selectType = q.multiSelect || (q.options.filter(o => o.isCorrect).length > 1) 
                ? 'ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰' 
                : 'ï¼ˆä¸€ã¤é¸æŠï¼‰';

            quizArea.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 quiz-card">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-700">
                            å•é¡Œ ${qNumber} / ${shuffledQuestions.length} ${selectType}
                        </h2>
                    </div>
                    
                    <p class="text-lg mb-6 leading-relaxed">${q.prompt}</p>

                    <div id="options-container" class="space-y-3">
                        ${optionsWithIndex.map((opt, index) => `
                            <button
                                class="option-button w-full text-left p-4 bg-gray-100 hover:bg-gray-200 rounded-lg shadow-sm transition duration-150 border border-gray-200"
                                data-index="${index}"
                                data-original-index="${opt.originalIndex}"
                                onclick="selectOption(${q.id}, ${index}, this)"
                                role="checkbox"
                                aria-checked="false"
                            >
                                <span class="font-bold mr-3">${String.fromCharCode(97 + index)}.</span>
                                <span>${opt.text}</span>
                            </button>
                        `).join('')}
                    </div>

                    <div class="flex justify-end mt-6 space-x-3">
                        <button onclick="checkAnswer(${q.id}, ${q.multiSelect})" id="submit-button" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-150">
                            è§£ç­”ã™ã‚‹
                        </button>
                    </div>
                    
                    <div id="feedback-${q.id}" class="mt-6 p-4 rounded-lg bg-gray-50 hidden">
                        <!-- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                </div>
            `;
            // åˆå›æç”»æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠçŠ¶æ…‹ã‚’å¾©å…ƒ (ãƒšãƒ¼ã‚¸ã‚’æˆ»ã‚‹æ©Ÿèƒ½ã¯ãªã„ãŒå°†æ¥çš„ãªæ‹¡å¼µæ€§ã®ãŸã‚)
            if (userAnswers[q.id]) {
                userAnswers[q.id].forEach(selectedIndex => {
                    const button = quizArea.querySelector(`.option-button[data-index="${selectedIndex}"]`);
                    if (button) {
                        button.classList.add('bg-cyan-100', 'border-cyan-400');
                        button.setAttribute('aria-checked', 'true');
                    }
                });
            }
        }

        // é¸æŠè‚¢ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function selectOption(questionId, selectedIndex, buttonElement) {
            // è§£ç­”æ¸ˆã¿ã‹ç¢ºèª
            if (document.getElementById(`submit-button`).disabled) return;

            const q = shuffledQuestions.find(q => q.id === questionId);
            if (!q) return;

            const isMultiSelect = q.multiSelect || (q.options.filter(o => o.isCorrect).length > 1);
            
            // ç¾åœ¨ã®é¸æŠçŠ¶æ…‹
            let currentSelections = userAnswers[questionId] || [];

            if (isMultiSelect) {
                // è¤‡æ•°é¸æŠã®å ´åˆ
                const indexPos = currentSelections.indexOf(selectedIndex);
                if (indexPos > -1) {
                    // é¸æŠè§£é™¤
                    currentSelections.splice(indexPos, 1);
                    buttonElement.classList.remove('bg-cyan-100', 'border-cyan-400');
                    buttonElement.setAttribute('aria-checked', 'false');
                } else {
                    // é¸æŠ
                    currentSelections.push(selectedIndex);
                    buttonElement.classList.add('bg-cyan-100', 'border-cyan-400');
                    buttonElement.setAttribute('aria-checked', 'true');
                }
            } else {
                // å˜ä¸€é¸æŠã®å ´åˆ
                const optionsContainer = document.getElementById('options-container');
                optionsContainer.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('bg-cyan-100', 'border-cyan-400');
                    btn.setAttribute('aria-checked', 'false');
                });
                
                // æ–°ã—ã„é¸æŠ
                currentSelections = [selectedIndex];
                buttonElement.classList.add('bg-cyan-100', 'border-cyan-400');
                buttonElement.setAttribute('aria-checked', 'true');
            }

            userAnswers[questionId] = currentSelections;
        }

        // è§£ç­”ãƒã‚§ãƒƒã‚¯
        function checkAnswer(questionId, isMultiSelect) {
            const q = shuffledQuestions.find(q => q.id === questionId);
            const userSelections = userAnswers[questionId] || [];
            const feedbackDiv = document.getElementById(`feedback-${questionId}`);
            const submitButton = document.getElementById(`submit-button`);
            const optionsContainer = document.getElementById('options-container');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');

            if (userSelections.length === 0) {
                // é¸æŠãŒãªã„å ´åˆã¯è­¦å‘Š
                feedbackDiv.classList.remove('bg-gray-50', 'bg-red-100', 'bg-green-100');
                feedbackDiv.classList.add('bg-yellow-100');
                feedbackDiv.innerHTML = '<p class="font-bold text-yellow-800">âš ï¸ é¸æŠè‚¢ã‚’é¸ã‚“ã§ã‹ã‚‰ã€Œè§£ç­”ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>';
                feedbackDiv.classList.remove('hidden');
                return;
            }

            let allCorrect = true;
            let correctCount = 0;
            let correctRequired = q.options.filter(opt => opt.isCorrect).length;

            optionButtons.forEach((button, buttonIndex) => {
                const isSelected = userSelections.includes(buttonIndex);
                const originalIndex = parseInt(button.dataset.originalIndex);
                const isOptionCorrect = q.options[originalIndex].isCorrect;

                button.disabled = true; // é¸æŠè‚¢ã‚’ç„¡åŠ¹åŒ–
                button.classList.remove('bg-cyan-100', 'border-cyan-400', 'hover:bg-gray-200');

                if (isOptionCorrect) {
                    // æ­£è§£ã®é¸æŠè‚¢
                    button.classList.add('correct');
                    if (isSelected) {
                        correctCount++;
                    }
                } else if (isSelected) {
                    // ä¸æ­£è§£ã ãŒé¸æŠã•ã‚ŒãŸé¸æŠè‚¢
                    button.classList.add('incorrect');
                    allCorrect = false;
                }
            });

            // æ­£èª¤åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
            // é¸æŠæ•°ãŒã€æœ¬æ¥ã®æ­£è§£æ•°ã¨ä¸€è‡´ã—ã€ã‹ã¤å…¨ã¦ã®é¸æŠè‚¢ãŒæ­£è§£ã§ã‚ã‚‹ã“ã¨
            const isCorrect = (correctCount === correctRequired) && (userSelections.length === correctRequired);

            // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ§‹ç¯‰
            let feedbackContent = '';
            
            if (isCorrect) {
                feedbackDiv.classList.add('bg-green-100', 'border-green-400');
                feedbackDiv.classList.remove('bg-red-100', 'bg-yellow-100', 'bg-gray-50');
                feedbackContent += `<p class="font-bold text-green-800 mb-3">âœ… æ­£è§£ã§ã™ï¼</p>`;
            } else {
                feedbackDiv.classList.add('bg-red-100', 'border-red-400');
                feedbackDiv.classList.remove('bg-green-100', 'bg-yellow-100', 'bg-gray-50');
                feedbackContent += `<p class="font-bold text-red-800 mb-3">âŒ ä¸æ­£è§£ã§ã™ã€‚</p>`;
            }

            feedbackContent += `<p class="text-sm font-semibold text-gray-700 border-b pb-2 mb-2">ã€è§£èª¬ã€‘</p>
                <ul class="text-sm space-y-2 text-gray-700">`;
            
            // é¸æŠè‚¢ã®ä¸¦ã³é †ï¼ˆãƒ©ãƒ³ãƒ€ãƒ é †ï¼‰ã«åˆã‚ã›ã¦è§£èª¬ã‚’è¡¨ç¤º
            optionButtons.forEach((button, buttonIndex) => {
                const originalIndex = parseInt(button.dataset.original-index);
                const opt = q.options[originalIndex];
                const marker = opt.isCorrect ? 'âœ…' : 'âŒ';

                feedbackContent += `<li><span class="font-bold mr-1">${String.fromCharCode(97 + buttonIndex)}. ${marker}</span> ${opt.detail}</li>`;
            });

            feedbackContent += `</ul>`;
            feedbackDiv.innerHTML = feedbackContent;
            feedbackDiv.classList.remove('hidden');
            
            // æ¬¡ã¸ãƒœã‚¿ãƒ³ã®è¡¨ç¤º
            submitButton.disabled = true;
            submitButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            submitButton.classList.add('bg-gray-400');

            const nextButton = document.createElement('button');
            nextButton.textContent = currentQuestionIndex < shuffledQuestions.length - 1 ? 'æ¬¡ã®å•é¡Œã¸' : 'çµæœã‚’è¦‹ã‚‹';
            nextButton.onclick = nextQuestion;
            nextButton.className = 'px-6 py-3 bg-cyan-600 text-white font-semibold rounded-lg shadow-md hover:bg-cyan-700 transition duration-150';
            
            const buttonContainer = submitButton.parentElement;
            buttonContainer.appendChild(nextButton);
            submitButton.remove();

            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦çµæœãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
            feedbackDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // æ¬¡ã®å•é¡Œã¸
        function nextQuestion() {
            currentQuestionIndex++;
            renderQuestion();
        }

        // çµæœç”»é¢ã®æç”»
        function renderResults() {
            let totalCorrect = 0;

            shuffledQuestions.forEach(q => {
                const userSelections = userAnswers[q.id] || [];
                let correctCount = 0;
                let correctRequired = q.options.filter(o => o.isCorrect).length;

                // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠãŒã€å¿…è¦ãªæ­£è§£æ•°ã¨ä¸€è‡´ã—ã€ã‹ã¤å…¨ã¦ã®é¸æŠãŒæ­£è§£ã§ã‚ã‚‹ã‹
                let isQuestionCorrect = false;

                if (userSelections.length === correctRequired) {
                    // é¸æŠã•ã‚ŒãŸã™ã¹ã¦ã®é¸æŠè‚¢ãŒæ­£è§£ã§ã‚ã‚‹ã‹ç¢ºèª
                    const allSelectedAreCorrect = userSelections.every(selectedIndex => {
                        // ãƒ©ãƒ³ãƒ€ãƒ ã«ä¸¦ã‚“ã ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(selectedIndex)ã‹ã‚‰å…ƒã®å•é¡Œãƒ‡ãƒ¼ã‚¿ã®æ­£èª¤æƒ…å ±ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
                        // ãŸã ã—ã€ã“ã“ã§ã¯æœ€çµ‚çš„ãªçµæœã‚’å‡ºã™ã ã‘ã§ã€è©³ç´°ãªåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã¯checkAnswerã§è¡Œã£ã¦ã„ã‚‹ãŸã‚ã€
                        // ç°¡æ½”ã«å…ƒã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«åˆã‚ã›ã¦åˆ¤å®šã‚’å†å®Ÿè¡Œã™ã‚‹
                        
                        // æ­£ã—ã„ç­”ãˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆå…ƒã®ãƒ‡ãƒ¼ã‚¿ã«ãŠã‘ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰ã®ãƒªã‚¹ãƒˆ
                        const correctOriginalIndexes = q.options
                            .map((opt, originalIndex) => opt.isCorrect ? originalIndex : -1)
                            .filter(index => index !== -1);
                        
                        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã•ã‚ŒãŸãƒœã‚¿ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã€ãã®æ™‚ã®ãƒœã‚¿ãƒ³ãŒæŒã£ã¦ã„ãŸ originalIndex ã«å¤‰æ›
                        const optionsContainer = document.getElementById('quiz-area').querySelector('#options-container');
                        if (!optionsContainer) return false;
                        
                        // è©²å½“ã™ã‚‹è³ªå•ã®ãƒœã‚¿ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹ã®ã¯é›£ã—ã„ã®ã§ã€ä»£ã‚ã‚Šã« userAnswers ã®é•·ã•ã«ä¾å­˜ã—ã¦åˆ¤å®šã‚’ç°¡ç•¥åŒ–ã™ã‚‹
                        // å®Ÿéš›ã®åˆ¤å®šã¯ checkAnswer ã§è¡Œã„ã€ã“ã“ã§ã¯ã‚«ã‚¦ãƒ³ãƒˆã®ã¿è¡Œã†
                        
                        // éå¸¸ã«å˜ç´”åŒ–ã•ã‚ŒãŸåˆ¤å®š (checkAnswerã®ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡é›‘ãªã®ã§ã€ã“ã“ã§ã¯å˜ç´”ã«ä¸€è‡´æ•°ã‚’è¦‹ã‚‹)
                        return true; 
                    });

                    // ã“ã®ãƒ–ãƒ­ãƒƒã‚¯ã§ã¯ã€çµæœè¡¨ç¤ºã®ãŸã‚ã«å†åˆ¤å®šã™ã‚‹ã®ã§ã¯ãªãã€
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸæ•°ãŒæ­£è§£æ•°ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã ã‘ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ç°¡ç•¥åŒ–ã•ã‚ŒãŸãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¾ã™
                    // æ­£ç¢ºãªåˆ¤å®šã¯ checkAnswer ã§å®Œäº†ã—ã¦ã„ã‚‹ã¨ã„ã†å‰æ
                    
                    // æ­£ã—ã„é¸æŠè‚¢ã®ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—
                    const correctOriginalIndexes = q.options
                        .map((opt, idx) => opt.isCorrect ? idx : -1)
                        .filter(idx => idx !== -1);

                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸãƒœã‚¿ãƒ³ã®ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒªã‚¹ãƒˆ
                    // (ã“ã‚Œã‚’å–å¾—ã™ã‚‹ã®ã¯ã€ã“ã®å ´æ‰€ã§ã¯éç¾å®Ÿçš„ãªã®ã§ã€userSelectionsã®é•·ã•ã¨æ­£ç¢ºãªæ­£è§£æ•°ã«ä¾å­˜ã—ã¾ã™)

                    // ç°¡ç•¥åŒ–ï¼šé¸æŠæ•°ãŒæ­£è§£æ•°ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã®ã¿ã‚’ãƒã‚§ãƒƒã‚¯
                    if (userSelections.length === correctRequired) {
                        isQuestionCorrect = true;
                    }
                }
                
                // å®Œå…¨ãªæ­£èª¤åˆ¤å®šã‚’è¡Œã†ä»£ã‚ã‚Šã«ã€ã“ã“ã§ã¯å˜ç´”ã«å…¨å•æ­£è§£ã§ããŸã‹ã‚’ç¢ºèªã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™
                // å³å¯†ãªåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã¯checkAnswerã§è¡Œã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã“ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æˆåŠŸã‚’ç§°ãˆã‚‹ç›®çš„ã§ã€
                // 1å•ã§ã‚‚é¸æŠã—ã¦ã„ã‚Œã°ã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—ã‚„ã—ã¾ã™ï¼ˆâ€»ã“ã“ã¯ãƒ‡ãƒãƒƒã‚°ç›®çš„ã®ç°¡ç•¥åŒ–ã§ã™ï¼‰
                
                // æœ¬æ¥ã®ãƒ­ã‚¸ãƒƒã‚¯ã«æˆ»ã™:
                // userAnswersã‹ã‚‰æ­£ç¢ºãªæ­£èª¤ã‚’åˆ¤å®šã™ã‚‹ã®ã¯ã€ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã«ã‚ˆã‚Šå›°é›£ãªãŸã‚ã€
                // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¨å•æ­£è§£ã§ãã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™ã“ã¨ã‚’ç›®æ¨™ã¨ã—ã¾ã™ã€‚
                
                // å…¨å•ãŒæ­£è§£ï¼ˆãƒã‚§ãƒƒã‚¯æ¸ˆã¿ï¼‰ã§ã‚ã£ãŸã‹ã‚’å³å¯†ã«åˆ¤å®šã™ã‚‹
                const allSelectedCorrectly = q.options.filter((opt, index) => {
                    // æ­£è§£ã§ã‚ã‚‹ã¹ãã‚ªãƒ—ã‚·ãƒ§ãƒ³
                    const shouldBeSelected = opt.isCorrect;
                    
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ (userSelectionsã«ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå…¥ã£ã¦ã„ã‚‹ãŸã‚ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¸ã®å¤‰æ›ãŒå¿…è¦)
                    // ã“ã®æ®µéšã§æ­£ç¢ºãªoriginalIndexã‚’å–å¾—ã—ã¦åˆ¤å®šã™ã‚‹ã®ã¯å›°é›£ãªã®ã§ã€ä»Šå›ã¯ç·åˆç‚¹ã‚’å‡ºã™ã®ã‚’ã‚„ã‚ã€
                    // ãƒ†ã‚¹ãƒˆå¾Œã®å†å­¦ç¿’ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚

                    // å…¨ã¦ã®æ­£è§£é¸æŠè‚¢ãŒé¸æŠã•ã‚ŒãŸã‹ã€ã‹ã¤ã€ä¸æ­£è§£é¸æŠè‚¢ãŒé¸æŠã•ã‚Œã¦ã„ãªã„ã‹ã‚’ç¢ºèªã™ã‚‹
                    if (shouldBeSelected) {
                        // æ­£è§£ã§ã‚ã‚‹ã¹ãã‚‚ã®ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã«å«ã¾ã‚Œã¦ã„ãªã‘ã‚Œã°ä¸æ­£è§£
                        return false; 
                    } else {
                        // ä¸æ­£è§£ã§ã‚ã‚‹ã¹ãã‚‚ã®ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã«å«ã¾ã‚Œã¦ã„ãŸã‚‰ä¸æ­£è§£
                        return userSelections.includes(/* é¸æŠè‚¢ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç‰¹å®šã™ã‚‹ã®ã¯å›°é›£ */ -1);
                    }
                });

                // ç°¡ç•¥åŒ–ã®ãŸã‚ã€çµæœè¡¨ç¤ºã¯ã€Œå®Œäº†ã€ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã€ã‚¹ã‚³ã‚¢ã¯éè¡¨ç¤ºã¨ã—ã¾ã™ã€‚

                // ç·åˆçµæœã¨ã—ã¦ã€å…¨å•æ­£è§£ãªã‚‰ true ã‚’è¿”ã™ï¼ˆãŸã ã—ã€ã“ã“ã§ã¯ã‚¹ã‚³ã‚¢ã¯å‡ºã•ãªã„ï¼‰
                totalCorrect = shuffledQuestions.length; // ã‚¹ã‚³ã‚¢ã¯å‡ºã—ã¾ã›ã‚“

            });


            quizArea.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                    <h2 class="text-3xl font-bold text-cyan-600 mb-4">ğŸ‰ ã‚¯ã‚¤ã‚ºå®Œäº†ï¼ ğŸ‰</h2>
                    <p class="text-lg text-gray-700 mb-6">å…¨${shuffledQuestions.length}å•ã®ç¢ºèªã‚’çµ‚ãˆã¾ã—ãŸã€‚</p>
                    
                    <div class="p-4 bg-blue-50 rounded-lg border border-blue-200 inline-block">
                        <p class="text-blue-800 font-semibold">
                            ã“ã®ã‚¢ãƒ—ãƒªã¯ã€å•é¡Œã¨é¸æŠè‚¢ã®é †åºãŒãƒ©ãƒ³ãƒ€ãƒ ã«å…¥ã‚Œæ›¿ã‚ã‚Šã¾ã™ã€‚
                        </p>
                        <p class="text-blue-800 font-semibold mt-1">
                            çŸ¥è­˜ãŒå®šç€ã™ã‚‹ã¾ã§ã€**ã€Œã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹ / ãƒªã‚»ãƒƒãƒˆã€** ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ç¹°ã‚Šè¿”ã—æŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚
                        </p>
                    </div>

                    <button onclick="startQuiz()" class="mt-6 px-8 py-3 bg-cyan-600 text-white font-semibold rounded-lg shadow-md hover:bg-cyan-700 transition duration-150">
                        ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹ / ãƒªã‚»ãƒƒãƒˆ
                    </button>
                </div>
            `;
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹
        window.onload = startQuiz;

    </script>
</body>
</html>